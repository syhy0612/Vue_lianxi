### 代码生成器使用：

[官方教程地址](http://v2.volcore.xyz/document/coder)

首先在数据库创建或修改表结构，最好是加上字段的备注信息。

#### 新增代码配置：

##### 仅创建目录

父级ID填0，表中文名填目录名称；其他必填项可随便填，但是不能填`/`。

##### 生成代码

父级ID填写父级目录的主键ID，实际表名填连接的数据库的表名，文件名可填数据库表名。

生成后点击`表结构`中的`同步表结构`即可显示数据库里对应的数据

##### 具体参数-常用部分

|    参数名称     | 参数介绍                                                     |
| :-------------: | :----------------------------------------------------------- |
|    快捷编辑     | 可不填，填写`列名`后，可以查看数据时点击蓝底链接直接编辑该数据信息 |
|    Vue 路径     | 填写本地前端项目到views的绝对路径，例：D:\work\Web\src\views |
|   列显示名称    | 字段的备注信息（后续代码生成后的表头名称，也是导出.xlsx的表头信息） |
|      列名       | 数据库里的字段名（一般由自动生成，不用修改）                 |
|   查询行、列    | 选择高级查询时，此字段所在的行与列，如行=1列=2，则所在位置为第1行第2列，不填则不显示该查询条件 |
|   编辑行、列    | 同上，编辑完后需要点击`生成Model`                            |
|    查询类型     | 可不填，默认为`input`，根据需求填写。常用有：`input`、`模糊查询`、`date`、`datetime`、`select`等 |
|    编辑类型     | 同上，需注意如果使用`select`下拉框，需指定数据源             |
|     数据源      | 当编辑类型选择了`select`时，需指定数据源。如需新增数据源，需在`系统设置`的`下拉框绑定设置`中新增 |
| table列显示类型 | 有`img`、`excel`、`file`、`date`， 选择显示的文件类型 ，选`img`会直接显示图片缩略图 |
|   列显示顺序    | 数字越大越靠前，不建议用小数字，因为后续可能会插入数据打乱，数据间隔大方便插槽 |
|     可为空      | 默认为否，选择是后，该字段不可为空，实际上是加了一个required属性 |
|    是否只读     | 编辑或新建时，如果此字段为只读，则不可修改                   |
|    是否显示     | 是否显示该字段，一般id等标识会隐藏显示                       |
|   table列宽度   | 查看和使用导出功能时，表头的实际长度                         |



填写完成后保存，然后依次点击`生成Vue页面`，`生成Model`，`生成业务类`后刷新页面即可。



#### 修改代码配置：

1、如果需要修改表结构，请在数据库修改，再点同步表结构->生成Vue页面->生成model。

2、修改编辑行后需要点击生成model、生成Vue页面



#### 删除当前菜单：

删除左侧配置菜单：删除行->保存->删除菜单

（暂未测试）

#### 启用菜单：

> <u>如果是用代码生器生成的Vue页面，请在viewGrid.js中参考前面代码给新增自动生成的代码**手动添加meta属性**</u>
>
> <u>（如果不加meta属性会导致在菜单访问地址提示401）</u>

##### 创建一级菜单或空菜单

父级ID填0，菜单名称填目录名称，视图/表名填写`/`，(路由)Url不填，排序号可修改，

数字越大越靠前，是否启动选启动，菜单类型选PC菜单，然后保存即可。

##### 创建子菜单

在父菜单下点击添加子级或在同级菜单下点击添加同级，只要父级ID保证是对应父级菜单正确就可以了。

菜单名称填目录名称，视图/表名填写代码生成器中填写的表名（一般也是数据库的表名），

(路由)Url填Vue项目中src->router->viewGrid.js对应表名的path属性，例：/t_pay

排序号可修改，数字越大越靠前，是否启动选启动，菜单类型选PC菜单，勾选需求权限然后保存即可。



#### 配置权限：

*以配置角色`员工`的权限为例*

进入`用户管理`的`权限管理`，选择员工，找到响应菜单，勾选响应所需权限后点击保存即可。

##### 验证权限

登录角色为员工的账号，查看是否有对应权限功能。



------



### 启动项目：

前端：在项目的`Web`文件夹里的终端启动：`npm run serve`

后端：在项目的`API`文件夹里打开`VOL.sln`，将`VOL.WebApi`设为启动项目并启动

（`VOL.WebApi`里的`appsettings.json`里需配置对应的数据库连接及Redis）



### 代码提交：

先去前端后端对应的文件夹分别选择需要提交的文件勾选后提交

（后端主要提交.cs文件）

然后在.git外面拉取项目代码

最后推送代码





> 官方文档配置解释ai提炼 @[官方教程地址](http://v2.volcore.xyz/document/coder)

### 代码生成器参数配置解释

1. **Id**: 表的唯一标识符。

2. **父级Id**: 指定表在代码结构中的层级位置。

3. **项目命名空间**: 生成的代码文件将被放置在这个命名空间下的类库中。

4. **表中文名**: 需要生成代码的表的中文名称。

5. **表别名**: 
   - 可以设置一个别名来替代真实表名。
   - 这个别名将用于生成的Model和业务类。
   - 每个表只能有一个别名。
   - 默认情况下,表名和别名相同。
   - 如果想使用新的别名,必须先删除之前生成的文件。

6. **实际表名**: 用于替换表名,但此功能尚未开发。

7. **项目文件夹**: 
   - 生成的文件将被放在这个文件夹中。
   - 这个文件夹位于所选命名空间的类库下。
   - 不需要手动创建这个文件夹。

8. **明细表中文名**: 如果有从表,这里填写从表的中文名。

9. **明细表名**: 
   - 用于生成主从表关系和UI。
   - 在生成主表代码之前,必须先生成明细表(从表)的代码。

10. **快捷编辑字段**: 
    - 设置后,前台界面的表格中会出现一个链接。
    - 点击链接可以快速查看该字段的详细信息。

11. **排序字段**: 
    - 前台表格的排序依据。
    - 如果主键不是自增的,必须设置此值。

12. **Vue视图绝对路径**: 
    - 生成的Vue页面文件将被保存在这个路径下。
    - 例如: "E:/project/views/"


2. 代码生成器表结构配置:





### 代码生成器表结构配置解释

1. **列中文名**: 表中每列在界面上显示的中文名称。

2. **列名**: 数据库中的实际列名。

3. **列最大长度**: 
   - 数据库中设置的列长度。
   - 注意: 如果使用MySQL且主键是Guid,应将字段类型设为char(36),否则生成的实体Model可能与数据库类型不匹配。

4. **数据类型**: C#属性的数据类型。除非数据库字段类型改变,否则通常不需修改。

5. **table列显示类型**: 
   - 如果列存储的是文件路径,可以在这里设置特殊显示类型。
   - 例如:图片路径选择"img",Excel文件路径选择"excel"。
   - 设置后,表格中点击文件名将自动下载文件。

6. **可为空**: 指定字段是否可以为null。影响前后端的验证规则。

7. **排序号**: 决定字段在前端页面表格中的显示顺序。

8. **数据源**: 
   - 用于下拉框或多选框。
   - 选择对应的数据字典编号。
   - 在"下拉框绑定设置"菜单中配置数据源。

9. **是否只读**: 如果设为只读,在编辑或新建时该字段不可修改。

10. **编辑行、编辑列**: 
    - 决定字段在新建/编辑界面中的位置。
    - 例如: 行=1,列=2 表示位于第1行第2列。
    - 不在此配置中的字段将被过滤,不显示在编辑或新建界面。
    - 如果只想编辑但不显示在界面上,将编辑行设为0。

11. **编辑类型**: 新建/编辑时使用的输入控件类型,如日期选择器、下拉框、文本框等。

12. **colSize**: 
    - 控制字段在编辑、新建、查看时的显示长度。
    - 值范围1-12,如设为12则该字段独占一行。

13. **查询行、查询列**: 决定字段在查询界面中的位置,类似编辑行、列。

14. **查询类型**: 查询时使用的控件类型,如日期选择器、下拉框、文本框等。

15. **导入列、Api输入列，是否可为空、api输出列**: 这些功能尚未实现。

16. **主键**: 指定是否为主键。每个表必须有且仅有一个主键。
